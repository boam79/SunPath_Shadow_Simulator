# 🗺️ SunPath & Shadow Simulator 로드맵

**작성일:** 2025-01-30  
**프로젝트:** SunPath & Shadow Simulator  
**버전:** 0.1.0  
**현재 상태:** MVP 완료, 프로덕션 배포 완료, 다국어 지원 완료

---

## 📋 목차

1. [프로젝트 개요](#프로젝트-개요)
2. [다국어 지원 (i18n)](#다국어-지원-i18n) ✅
3. [수익화 전략](#수익화-전략)
4. [기능 제안 및 개선안](#기능-제안-및-개선안)
5. [구현 로드맵](#구현-로드맵)

---

## 프로젝트 개요

**SunPath & Shadow Simulator**는 위치와 날짜를 입력하면 정확한 태양 경로, 일조량, 그림자 방향을 실시간으로 시각화하는 웹 기반 시뮬레이터입니다.

### 기술 스택
- **프론트엔드:** Next.js 14 (App Router), React, Tailwind CSS, MapLibre GL JS, Recharts
- **백엔드:** FastAPI, pvlib-python, Redis
- **배포:** Vercel (frontend), Render (backend)
- **SEO:** Google Search Console 인증 완료

### 현재 기능
- ✅ 태양 경로 계산 (NREL SPA 알고리즘)
- ✅ 그림자 시뮬레이션
- ✅ 일사량 계산 (Clear Sky Model)
- ✅ 지도 통합 (MapLibre GL JS)
- ✅ 타임라인 애니메이션
- ✅ 데이터 내보내기 (CSV/JSON)
- ✅ 최적 시간대 추천
- ✅ 지도 범례 및 정보 오버레이
- ✅ 카카오페이 기부 통합
- ✅ **다국어 지원 (한국어/영어)**

---

## 다국어 지원 (i18n) ✅

### 구현 완료 상태

다국어 지원이 **성공적으로 완료**되었습니다.

#### 구현 방식
- **라이브러리:** Custom Context API 기반 i18n (next-intl 대체)
- **이유:** App Router 통합 복잡도 고려, 더 가볍고 커스터마이징 용이
- **지원 언어:** 한국어 (ko), 영어 (en)

#### 완료된 기능
- ✅ 모든 컴포넌트 다국어 지원
  - Header, Sidebar, MainContent
  - Timeline, Chart, OptimizationPanel
  - Map, KakaoPayDonation, Footer
- ✅ 언어 선택 드롭다운 (헤더)
- ✅ localStorage 언어 설정 저장
- ✅ 브라우저 언어 자동 감지
- ✅ 시간 형식 자동 변환 (ko: "오후 12:00", en: "12:00 PM")
- ✅ z-index 문제 해결 (언어 드롭다운)
- ✅ SEO 최적화: HTML `lang` 속성 및 `document.title` 동적 업데이트

#### 파일 구조
```
frontend/
├── lib/
│   ├── i18n.ts                    # i18n 유틸리티
│   └── i18n-context.tsx           # React Context
├── i18n/
│   └── locales/
│       ├── ko/
│       │   └── messages.ts        # 한국어 번역
│       └── en/
│           └── messages.ts        # 영어 번역
└── components/
    ├── I18nWrapper.tsx            # Context Provider
    └── ...
```

#### 번역 범위
- UI 레이블 및 버튼
- 에러 메시지
- 차트 축 및 범례
- 지도 범례 및 정보 오버레이
- 최적화 패널
- 기부 모달

### SEO 최적화

#### 완료된 항목
- ✅ HTML `lang` 속성 동적 업데이트 (언어 변경 시)
- ✅ 페이지 제목(Title) 동적 업데이트
- ✅ SEO 메타데이터 번역 추가
- ✅ 브라우저 초기 로딩 시 언어 자동 감지 및 적용

#### 클라이언트 i18n 제약사항
- ⚠️ 완전한 `hreflang` 태그 구현은 URL 기반 라우팅 필요
- 현재 구조: SPA 방식 클라이언트 전용 i18n
- 현재 메타데이터: 정적 SEO 메타데이터 (한국어 기준)
- 동적 메타데이터: `document.title` 클라이언트에서 변경됨

---

## 수익화 전략

### 🟣 스폰서십/기부 (Donations)

**현재 구현됨:** ✅ KakaoPay 기부 버튼 (사이드바 최상단/하단, 푸터)

#### 플랫폼
- **KakaoPay** (한국 사용자용) - 구현 완료
- GitHub Sponsors (향후 추가)
- Ko-fi (향후 추가)
- Buy Me a Coffee (향후 추가)
- Patreon (향후 추가)

#### 구현 방법
- 웹사이트 사이드바 및 푸터에 기부 버튼 추가
- 데스크톱: QR 코드 모달 표시
- 모바일: 직접 카카오페이 앱으로 이동
- "☕ 카카오페이로 후원하기" 메시지 (다국어 지원)

#### 예상 수익
- 월 10명 후원자 × $5 = **$50/월**
- 연간: **$600** (약 78만원)

---

## 기능 제안 및 개선안

### ✅ 완료된 기능

#### Phase 1 완료
1. ✅ **지도 범례 추가** (30분)
2. ✅ **현재 위치 자동 감지** (30분-1시간)
3. ✅ **최적 시간대 추천** (3-4시간)
4. ✅ **고급 차트 시각화** (3-4시간)
5. ✅ **컬러 그라데이션 연동** (2-3시간)
6. ✅ **다국어 지원** (4-5시간)

### 🔴 High Priority (즉시 추가 권장)

#### 1. 에러 복구 및 재시도 UI 개선 🔄
- **상태:** 부분 구현 (MainContent에 버튼 있음)
- **개선 사항:** 더 명확한 에러 메시지 및 복구 안내
- **구현 난이도:** ⭐ (매우 낮음)
- **예상 시간:** 30분
- **파일:** `frontend/components/layout/MainContent.tsx`

#### 2. 로딩 상태 개선 ⏳
- **기능:** 계산 진행률 표시 (진행률 바 또는 스켈레톤 UI)
- **사용 사례:** 대용량 계산 시 사용자 대기 시간 인지
- **구현 난이도:** ⭐⭐ (낮음)
- **예상 시간:** 1시간
- **파일:** `frontend/components/layout/MainContent.tsx`

### 🟠 Medium Priority (중기 개선)

#### 1. 계절별 비교 모드 📅
- **기능:**
  - 4계절(춘분, 하지, 추분, 동지) 데이터를 한 번에 계산
  - 비교 차트로 표시
  - 계절별 일조 시간, 최대 고도 비교
- **사용 사례:**
  - 건축 설계 시 계절별 일조량 분석
  - 태양광 패널 설치 최적 위치 결정
- **구현 난이도:** ⭐⭐⭐ (중간)
- **예상 시간:** 4-6시간
- **파일:** `frontend/components/SeasonComparison.tsx`, `backend/app/api/season.py`

#### 2. 다중 객체 지원 🏢
- **기능:**
  - 여러 물체의 그림자 동시 표시
  - 각 객체별 높이/위치 설정
  - 객체 간 간섭 분석
- **사용 사례:**
  - 건물군 그림자 분석
  - 조경 설계 시 나무 배치 최적화
- **구현 난이도:** ⭐⭐⭐⭐ (높음)
- **예상 시간:** 8-10시간
- **파일:** `frontend/components/MultiObjectEditor.tsx`, `backend/app/api/multi_shadow.py`

#### 3. PDF 리포트 생성 📄
- **기능:**
  - 계산 결과를 PDF로 내보내기
  - 요약 정보, 차트, 지도 스크린샷 포함
  - 커스텀 로고/헤더 지원
- **사용 사례:**
  - 클라이언트 제출용 리포트
  - 설계 문서에 포함
- **구현 난이도:** ⭐⭐⭐ (중간)
- **예상 시간:** 4-5시간
- **파일:** `frontend/lib/pdfExport.ts` (jsPDF + html2canvas)

### 🟡 Low Priority (향후 추가)

#### 1. 애니메이션 GIF 생성 🎬
- **기능:** 하루 태양 움직임을 GIF로 내보내기
- **구현 난이도:** ⭐⭐⭐⭐ (높음)
- **예상 시간:** 6-8시간
- **라이브러리:** `gif.js` 또는 `ffmpeg-wasm`

#### 2. 날씨 데이터 통합 ☁️
- **기능:** 실제 날씨 데이터를 반영한 일사량 계산
- **구현 난이도:** ⭐⭐⭐⭐ (높음)
- **예상 시간:** 8-10시간
- **API:** OpenWeatherMap, WeatherAPI

---

## 구현 로드맵

### 📅 Phase 1: 즉시 구현 가능, 높은 가치 (1.5-2시간)

**목표:** 즉시 UX 개선

1. ✅ 지도 범례 추가 (30분) - **완료**
2. ✅ 현재 위치 자동 감지 (30분-1시간) - **완료**
3. ✅ 다국어 지원 (4-5시간) - **완료**
4. 🔄 에러 복구 UI 개선 (30분) - **부분 완료**
5. 🔄 로딩 상태 개선 (1시간) - **진행 필요**

**총 소요 시간:** 약 1.5-2시간 (남은 작업)

### 📅 Phase 2: 중기 개선 (8-11시간)

**목표:** 고급 기능 추가

1. ✅ 고급 차트 시각화 (3-4시간) - **완료**
2. ✅ 컬러 그라데이션 연동 (2-3시간) - **완료**
3. ✅ 최적 시간대 추천 (3-4시간) - **완료**
4. 계절별 비교 모드 (4-6시간)

**총 소요 시간:** 약 4-6시간 (남은 작업)

### 📅 Phase 3: 장기 확장 (16-21시간)

**목표:** 전문적 기능 확장

1. 다중 객체 지원 (8-10시간)
2. PDF 리포트 생성 (4-5시간)
3. 다국어 확장 (일본어, 중국어 등)

**총 소요 시간:** 약 12-15시간

---

## 추가 개선 제안

### UX 개선
- **툴팁 추가:** 각 입력 필드에 설명 툴팁 추가
- **유효성 검증:** 날짜 범위, 객체 높이 범위 체크
- **단축키 힌트:** 사용 가능한 단축키 표시
- **온보딩 튜토리얼:** 첫 방문자 가이드

### 성능 최적화
- **가상 스크롤:** 대용량 데이터 리스트 표시 시
- **디바운싱:** 지오코딩 검색 최적화 (이미 구현됨)
- **이미지 최적화:** 지도 타일 캐싱
- **코드 스플리팅:** 큰 컴포넌트 지연 로딩

### 접근성
- **ARIA 레이블:** 모든 인터랙티브 요소에 레이블 추가
- **키보드 네비게이션:** 탭 순서 최적화
- **색상 대비:** WCAG 기준 준수 확인
- **스크린 리더 지원:** 숨김 텍스트 추가

### SEO 최적화
- **hreflang 태그:** 다국어 SEO
- **메타데이터 다국어화:** 각 언어별 메타데이터
- **구조화된 데이터:** JSON-LD 확장
- **사이트맵 최적화:** 다국어 URL 포함

---

## 📊 최종 권장사항

### 즉시 추가 권장
1. ✅ 다국어 지원 - **완료**
2. 🔄 에러 복구 UI 개선 (30분)
3. 🔄 로딩 상태 개선 (1시간)
4. ⏳ SEO 최적화 (1시간)

**총 소요 시간:** 약 2.5시간

### 중기 추가 권장
1. 계절별 비교 모드 (4-6시간)
2. PDF 리포트 생성 (4-5시간)

**총 소요 시간:** 약 8-11시간

---

## 📈 프로젝트 현황

### 완료율
- **Phase 1:** 80% 완료 (4/5 완료)
- **Phase 2:** 75% 완료 (3/4 완료)
- **Phase 3:** 0% 완료 (0/3 완료)

### 전체 진행도
- **전체 기능:** 약 58% 완료 (7/12 주요 기능)
- **다국어 지원:** 100% 완료
- **수익화:** 50% 완료 (KakaoPay 완료, 다른 플랫폼 미구현)

---

## 🎯 다음 단계

### 즉시 작업 (2.5시간)
1. 에러 복구 UI 개선
2. 로딩 상태 개선
3. SEO 최적화

### 중기 작업 (8-11시간)
1. 계절별 비교 모드
2. PDF 리포트 생성

### 장기 작업 (12-15시간)
1. 다중 객체 지원
2. 애니메이션 GIF 생성
3. 날씨 데이터 통합

---

**문서 버전:** 1.0  
**최종 수정:** 2025-01-30  
**다음 검토:** 기능 추가 시

